<HTML> 
  <HEAD>
<!--Office of Information & Technology (OI&T)-->
<!--Oakland OIFO-->
<!--Authored by Thom Blom and Susan Strack, 01/01/01-->
<!--Revised by Thom Blom, 10/18/10-->
    <META HTTP-EQUIV="Content-Type"
          CONTENT="text/html; charset=iso-8859-1"> 
    <TITLE>Kernel Toolkit APIs: Overview</TITLE>
    <META NAME="subject"
          CONTENT="XTLKKWL^XTLKKWL: Perform Supported VA FileMan Calls on Files Configured for MTLU">
    <META NAME="keywords"
	      CONTENT="Infrastructure and Security Services,Information Infrastructure Service,ISS,IIS,VISTA,kernel,toolkit,programmer,developer,programmer manual,apis,application programming interface,application,programming,interface,entry point,$$DECODE^XTHCUTL,$$DECODE,XTHCUTL,http,supported">
    <LINK REL="StyleSheet"
          TYPE="text/css"
          HREF="common/programmer.css"> 
  </HEAD> 
  <BODY> 
<!--webbot bot="Include" U-Include="common/banner_api_page-toolkit.htm" TAG="BODY" startspan -->
<!--Title Banner (image)-->
    <TABLE BORDER="0"
           WIDTH="100%"
           CELLSPACING="0"
           CELLPADDING="6"
	       SUMMARY="This table is for formatting purposes only"
	       HEIGHT="65"> 
      <TR> 
	    <TD VALIGN="middle"
	        ALIGN="left"
	        HEIGHT="30"> 
		  <IMG SRC="images/toolkit_heading_APIs-new.gif"
			   ALT="Toolkit 7.3 APIs Banner"
			   BORDER="0" width="429" height="29">
		  <A HREF="#navskip">
		  <IMG SRC="images/clr_pxl.gif"
			   ALT="[skip navigation]"
			   WIDTH="25"
			   HEIGHT="1"
			   BORDER="0"></A>
		  <BR>
		  <IMG SRC="images/oitbanner.gif"
			   ALT="Office of Information & Technology (OIT) Banner"
			   BORDER="0" width="429" height="30">
			 </P>
		</TD> 
		<TD ALIGN="right"
		    VALIGN="middle"
		    HEIGHT="30"> 
		  <P></P>
        </TD> 
	  </TR> 
    </TABLE> 
  <!--webbot bot="Include" endspan i-checksum="4890" --><P></P> 
<!-- Content -->
    <H3><A NAME="navskip">Overview</H3> 
	<P>A file in which entries need to be merged can be entered in the DUPLICATE RESOLUTION (#15.1) file. This requires adding the file as one that can be selected as the VARIABLE POINTER, and search criteria would usually need to be specified to assist in identifying potential duplicate pairs (although an option can be used by which selected pairs can be added directly to the DUPLICATE RECORD (#15) file as verified duplicates). Verified duplicate pairs may be approved for merging, and a merge process generated for those approved pairs. A DUPLICATE RECORD (#15) file entry also has handle files that are not associated as normal pointers identified in the PACKAGE (#9.4) file under the AFFECTS RECORD MERGE subfile with special processing routines.</P> 
	<H4>CAUTION: If a file has related files that are not normal pointers, they should be handled only as entries in the duplicate record file and the Kernel Toolkit options used for merges involving the file.</H4> 
	<P>The merge utility of Kernel Toolkit as revised by Kernel Toolkit Patch XT*7.3*23 provides an entry point that is available to developers for the merging of one or more pairs of records (a FROM record and a TO record) in a specified file. The merge process merges the data of the FROM record into that of the TO record and deletes the FROM record, restoring by a hard set only the zero node with the .01 value on it until the merge process is completed (such that any references to that location via pointers does not error out). Any files that contain entries DINUMed with the data pairs are then also merged (and any files that are related to them by DINUM as well). Any pointers that can be identified rapidly by cross- references are modified so that references for the FROM entry become references to the TO entry instead. Following this, any files that contain other pointers are searched entry by entry to test for pointers to a FROM entry, and when found are modified to reference the TO entry. This search for pointer values is the most time consuming part of the entire process and may take an extended period depending upon the number of files that must be searched, the number of entries in those files, and how many levels at which subfiles pointers may be located. Since the search through these files takes the same period of time independent of the number of pairs that are being merged, it is suggested that as many pairs as convenient be combined in one process. At the end of the conversion of these pointers, the zero node stubs are removed from the primary file and all related DINUMed files.</P>
<p> The merge process is a single job that is tracked with frequent updates on location and status from start to finish. The job can be stopped at any time if necessary using TaskMan utilities (or in the event of a system crash, etc.) and restarted at the point of interruption at a later time.
</p>

	<H4>Manner in which data is Merged</H4> 
	
	<P>When a primary file or a DINUMed files entries are merged, any top level (single value) fields that are present in the FROM entry that are not present in the TO entry is merged into the TO entries data. Any of these fields that contain cross-references are entered using a VA FileMan utility (FILE^DIE) so that the cross-references are fired. Other fields (those without cross-references) are directly set into the data global.</P>
<p>If a subfile entry (Multiple) exists in the FROM record that is not present in the TO record (as identified by the .01 value), that entry is created with a VA FileMan utility (UPDATE^DIE) and the rest of the subfile merged over into the TO record and the cross-references within the subfile and any descendent subfiles run.</p>
<p>If a subfile entry (Multiple) exists in the FROM record and an identical .01 value exists in the TO record, the subfile in the FROM record is searched for any descendent subfiles that are not present in the TO record subfile. If such a subfile is found it is merged into the subfile in the TO record and any cross- references in the merged subfile run.</p>
<p>For fields that are simple pointers to the primary file (or any other file DINUMed to the primary file) the reference to the FROM record is changed to a reference to the TO record. If the field contains a cross- reference this editing is performed using a VA FileMan Utility call (FILE^DIE), otherwise it is set directly into the global node.</p>

	<UL>
	</UL>
	<P>&nbsp;</P>
	<HR COLOR="003399"> 
	<TABLE WIDTH="100%"
	       SUMMARY="This table for layout purposes only"
	       CLASS="white"> 
	  <TR> 
		<TD ALIGN="CENTER"
		    VALIGN="TOP"
		    COLSPAN="2">
<!--Bottom Navigation Links-->
<!--webbot bot="Include" U-Include="common/bottom_links.htm"
             TAG="BODY" startspan -->
    <P ALIGN="CENTER">
	<A HREF="http://www.va.gov/"
	   CLASS="bodylink"
	   TARGET="_top"
	   TITLE="Department of Veterans Affairs Internet Home Page">
	   <ACRONYM TITLE="Department of Veterans Affairs">VA</ACRONYM> (Internet)</A> /
				 
    <A HREF="http://vaww.va.gov/"
       CLASS="bodylink"
       TARGET="_top"
	   TITLE="Department of Veterans Affairs Intranet Home Page">
	   <ACRONYM TITLE="Department of Veterans Affairs">VA</ACRONYM>(Intranet)</A> /
				 
    <A HREF="http://vaww.vhaco.va.gov/vhacio/"
       CLASS="bodylink"
       TARGET="_top"
	   TITLE="Office of Information Home Page">
	   <ACRONYM TITLE="Office of Information">OI</ACRONYM></A> /
				 
    <A HREF="http://vista.med.va.gov/"
       CLASS="bodylink"
       TARGET="_top"
	   TITLE="Product Development (PD) Home Page">
	   <ACRONYM TITLE="Product Development">PD</ACRONYM></A> /

    <A HREF="http://vista.med.va.gov/iss/site_map.asp"
       CLASS="bodylink"
       TARGET="_top"
	   TITLE="Infrastructure & Security Services (ISS) Site Map">Site Map</A> /

    <A HREF="http://vista.med.va.gov/termsofuse.htm"
       CLASS="bodylink"
       TARGET="_top"
	   TITLE="Product Development (PD) Terms of Use Page">Terms of Use</A> /

    <A HREF="http://www.va.gov/privacy/"
       CLASS="bodylink"
       TARGET="_top"
	   TITLE="Department of Veterans Affairs Privacy Policy">VA Privacy Policy</A> /

    <A HREF="http://www1.va.gov/accessible/"
       CLASS="bodylink"
       TARGET="_top"
	   TITLE="Department of Veterans Affairs Internet Accessibility">Accessibility</A></P> 
  <!--webbot bot="Include" endspan i-checksum="53201" --><!--Date content was reviewed or updated--><P ALIGN="CENTER"> Reviewed/Updated: 
          
          <!--webbot bot="Timestamp"
          S-Type="REGENERATED" S-Format="%B %d, %Y" startspan -->June 18, 2018<!--webbot bot="Timestamp" endspan i-checksum="21789" -->
		  <BR>
		  <BR>
		  If you have questions, need more information, or are having
		  accessibility problems with this website, please contact us by E-Mail:
		  <A HREF="mailto:VHAISFCVTECH@med.va.gov?subject=Web page comments from: /kernel/apis/x-decode^xthcutl.shtml"
			 TITLE="Send mail to the Webmasters regarding this page">Webmasters</A>, Phone:
		  510-768-6800, or FAX: 510-768-6850.</P><P>&nbsp;</P>
	    </TD> 
      </TR> 
    </TABLE>
  </BODY></HTML>
